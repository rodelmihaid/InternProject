<mat-form-field appearance="fill">
  <mat-label>Start Date</mat-label>
  <input
    matInput
    [matDatepicker]="picker1"
    [(ngModel)]="startDate"
    (dateChange)="checkDatesAndGenerate()"
  />
  <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
  <mat-datepicker #picker1></mat-datepicker>
</mat-form-field>

<mat-form-field appearance="fill">
  <mat-label>End Date</mat-label>
  <input
    matInput
    [matDatepicker]="picker2"
    [(ngModel)]="endDate"
    (dateChange)="checkDatesAndGenerate()"
  />
  <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
  <mat-datepicker #picker2></mat-datepicker>
</mat-form-field>

<button (click)="goToPreviousMonth(startDate)">Prev</button>
<button (click)="goToNextMonth(endDate)">Next</button>

<div *ngIf="months.length > 0">
  <div *ngFor="let month of months">
    <div
      *ngIf="month.month === currentViewMonth && month.year === currentViewYear"
    >
      <h2>{{ month.year }}-{{ month.month + 1 }}</h2>
      <div class="flex flex-row justify-around gap-2">
        <div class="text-center font-bold text-lg">Su</div>
        <div class="text-center font-bold text-lg">Mo</div>
        <div class="text-center font-bold text-lg">Tu</div>
        <div class="text-center font-bold text-lg">We</div>
        <div class="text-center font-bold text-lg">Th</div>
        <div class="text-center font-bold text-lg">Fr</div>
        <div class="text-center font-bold text-lg">Sa</div>
      </div>
      <div class="grid grid-cols-7 gap-1">
        <div
          *ngFor="let day of month.days"
          class="p-2 text-center hover:bg-blue-100 rounded"
        >
          <button
            (click)="selectDay(day, month)"
            *ngIf="day !== 0; else emptyCell"
            class="w-[100px] h-[100px]"
          >
            {{ day }}
            <div *ngIf="events[day]">
              <div *ngFor="let event of events[day]">
                <div *ngIf="event.month == currentViewMonth + 1">
                  {{ event.text }}
                </div>
              </div>
            </div>
          </button>
          <ng-template #emptyCell
            ><div class="w-[100px] h-[100px]"></div
          ></ng-template>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="selectedDay" class="p-4 bg-gray-100 rounded">
    <h3 class="text-lg font-semibold">
      Adaugă eveniment la data: {{ currentViewYear }}-{{
        currentViewMonth + 1
      }}-{{ selectedDay }}
    </h3>
    <form>
      <input
        type="text"
        [(ngModel)]="eventTitle"
        name="titlul"
        placeholder="Titlul evenimentului"
        class="border p-2 rounded w-full"
      />
      <div class="flex justify-around py-10">
        <button
          type="button"
          class="mt-2 p-2 bg-blue-500 text-white rounded"
          (click)="addEvent(eventTitle)"
        >
          Adaugă Eveniment
        </button>
        <button
          class="mt-2 p-2 bg-blue-500 text-white rounded font-extrabold"
          (click)="closeForm()"
        >
          &times;
        </button>
      </div>
    </form>
  </div>
</div>
